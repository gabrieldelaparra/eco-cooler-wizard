<!DOCTYPE html>
<meta charset="utf-8">
<body>
    <script src="https://d3js.org/d3.v7.min.js"></script>

    <svg id="Viz_area" height=600 width=600>
        <g id="Graph" transform="translate(50,50) scale(1)">
        </g>
    </svg>
    <p>
        <label for="widthData" style="display: inline-block; width: 240px; text-align: right">
            Width : <span id="widthData-value"></span>
        </label>
        <input type="number" min="0" max="1000" step="5" value="500" id="widthData">
    </p>

    <script>


      function render(width, height, horizontalGap, verticalGap, marginLeft, marginTop, marginBot){
        // Select the svg area
        var svg = d3.select("#Viz_area");
        var graph = d3.select("#Graph")
        graph.selectAll("*").remove();
        svg.selectAll("text").remove();

            // Create a scale: transform value in pixel
            // var x = d3.scaleLinear()
            //     .domain([0, width])         // This is the min and the max of the data: 0 to 100 if percentages
            //     .range([0, 600]);       // This is the corresponding value I want in Pixel

            // Show the axis that corresponds to this scale
            //svg.call(d3.axisBottom(x));

            // Add 3 dots for 0, 50 and 100%

            //Corner Labels
            graph.append('text').text('0').attr('dy','0.35em').attr('transform', 'translate('+-40+','+-20+')');
            graph.append('text').text(''+width).attr('dy','0.35em').attr('transform', 'translate('+width+','+-20+')');
            graph.append('text').text(''+height).attr('dy','0.35em').attr('transform', 'translate('+-40+','+height+')');


            //Draw Helpers
            for (let xPos = marginLeft; xPos < width - marginLeft; xPos+= horizontalGap) {
                //Grid
                graph.append('line').attr('x1', xPos).attr('y1', 0).attr('x2', xPos).attr('y2', height).style("stroke", "grey").style("stroke-width", 1);
                //Label
                graph.append('text').text(''+xPos).attr('dy','0.35em').attr('transform', 'translate('+xPos+','+-20+')');
            }
            for (let yPos = marginTop; yPos < height - marginBot; yPos+= verticalGap) {
                //Grid
                graph.append('line').attr('x1', 0).attr('y1', yPos).attr('x2', width).attr('y2', yPos).style("stroke", "grey").style("stroke-width", 1);
                //Label
                graph.append('text').text(''+yPos).attr('dy','0.35em').attr('transform', 'translate('+-40+','+yPos+')');
            }

            //Draw Circles
            for (let xPos = marginLeft; xPos < width - marginLeft; xPos+= horizontalGap) {
                for (let yPos = marginTop; yPos < height - marginBot; yPos+= verticalGap) {

                    // Circle
                    graph.append("circle")
                    .attr("cx", xPos).attr("cy", yPos).attr("r", 10).style("fill", "black");
                }
            }
            //Borders
            graph.append('line').attr('x1', 0).attr('y1', 0).attr('x2', width).attr('y2', 0).style("stroke", "black").style("stroke-width", 2);
            graph.append('line').attr('x1', 0).attr('y1', height).attr('x2', width).attr('y2', height).style("stroke", "black").style("stroke-width", 2);

            graph.append('line').attr('x1', 0).attr('y1', 0).attr('x2', 0).attr('y2', height).style("stroke", "black").style("stroke-width", 2);
            graph.append('line').attr('x1', width).attr('y1', 0).attr('x2', width).attr('y2', height).style("stroke", "black").style("stroke-width", 2);



            //.style('stroke-width', function(d) {return parseInt(maxDepth + 4 - d.d) + 'px';})
            //.attr('id', function(d) {return 'id-'+d.i;})
           // .on('mouseover', highlightParents)
            ///.on('mouseout', highlightParents)
           // .on('click',value);
            // svg.append("circle")
            //         .attr("cx", x(10)).attr("cy", 0).attr("r", 0).style("fill", "blue");

      }
        render(400, 500, 50, 50, 100, 50, 50);
        d3.select("#widthData").on("input", function() {
            render(this.value, 500, 50, 50, 100, 50, 50);
        });
    </script>
